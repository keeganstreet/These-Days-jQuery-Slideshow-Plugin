(function(e){var f,b,d,a,c=window.Modernizr&&window.Modernizr.csstransitions;f=function(g){var h={timeout:2000,speed:1000,fastSpeed:100,beforeTransition:null,currentClass:"current"};return this.each(function(){var i=e(this),j=i.data("tdslideshow");if(!j){j={};j.options=e.extend(h,g);j.$children=i.children();j.currentIndex=0;j.$current=j.$children.eq(0).addClass(j.options.currentClass);j.timeoutId=setTimeout(function(){d(i)},j.options.timeout);if(c){j.$current.siblings().css({opacity:0})}else{j.$current.siblings().hide()}i.data("tdslideshow",j)}})};b=function(g){return this.each(function(){d(e(this),g)})};d=function(j,h){var l=j.data("tdslideshow"),i,k,g;if(!l){return}clearTimeout(l.timeoutId);if(typeof h==="number"){if(l.currentIndex===h){return}l.currentIndex=h;k=l.options.fastSpeed;j.addClass("fastSpeed")}else{l.currentIndex=l.$current.index()+1;k=l.options.speed;j.removeClass("fastSpeed")}if(l.currentIndex>=l.$children.length){l.currentIndex=0}i=l.$children.eq(l.currentIndex);if(typeof l.options.beforeTransition==="function"){l.options.beforeTransition.apply(this,[l.currentIndex])}l.$current.removeClass(l.options.currentClass);i.addClass(l.options.currentClass);if(c){i.bind("transitionend oTransitionEnd webkitTransitionEnd",function(){i.unbind("transitionend oTransitionEnd webkitTransitionEnd");g()});i.css({opacity:1})}else{i.fadeIn(k,function(){g()})}g=function(){if(c){l.$current.css({opacity:0})}else{l.$current.hide()}l.$current=i;l.timeoutId=setTimeout(function(){d(j)},l.options.timeout);j.data("tdslideshow",l)}};a={init:f,gotoSlide:b};e.fn.tdslideshow=function(g){if(a[g]){return a[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return a.init.apply(this,arguments)}else{e.error("Method "+g+" does not exist on jQuery.tdslideshow")}}}}(jQuery));
